<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Hub | Ahmed Sayed</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;600;800&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #00f2ff;
            --secondary: #7000ff;
            --glass: rgba(255, 255, 255, 0.04);
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0; font-family: 'Tajawal', sans-serif;
            background: #020205; color: white; min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow-x: hidden;
        }

        .bg-vibe {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #0a0a1a 0%, #020205 100%);
        }

        .app-shell {
            width: 90%; max-width: 420px;
            background: var(--glass); backdrop-filter: blur(30px);
            border: 1px solid var(--border); border-radius: 45px;
            padding: 40px 25px; box-shadow: 0 50px 100px rgba(0,0,0,0.7);
            text-align: center; animation: bob 4s ease-in-out infinite;
            margin: 20px 0; position: relative;
        }

        @keyframes bob { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-15px); } }

        /* Ø²Ø± Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ù†Ø§Ø¨Ø¶ */
        .music-toggle {
            position: absolute; top: 25px; left: 25px;
            width: 40px; height: 40px; background: var(--glass);
            border: 1px solid var(--border); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 10; transition: 0.3s; color: white;
        }
        .music-toggle.playing {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent);
            animation: pulseMusic 1.5s infinite;
        }
        @keyframes pulseMusic {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .top-id {
            font-family: 'Plus Jakarta Sans'; font-size: 11px; letter-spacing: 5px;
            text-transform: uppercase; opacity: 0.5; margin-bottom: 40px;
            display: block; color: var(--accent); animation: pulseText 2s infinite alternate;
        }

        .pfp-stage { width: 130px; height: 130px; margin: 0 auto 30px; position: relative; }
        .pfp-stage img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; z-index: 5; position: relative; cursor: pointer; border: 3px solid var(--border); }
        .pfp-ring { position: absolute; inset: -10px; border-radius: 50%; border: 2px solid var(--accent); animation: spinRing 4s linear infinite; }
        .pfp-ring-2 { position: absolute; inset: -18px; border-radius: 50%; border: 1px dashed var(--secondary); animation: spinRing 6s linear infinite reverse; }
        @keyframes spinRing { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        h1 { font-size: 28px; margin: 0; font-weight: 900; }
        .bio-line { font-size: 15px; color: var(--accent); margin: 8px 0; }

        .daily-post { background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 25px; padding: 12px; margin: 20px 0; text-align: right; }
        .post-img { width: 100%; border-radius: 18px; margin-bottom: 10px; display: none; object-fit: cover; max-height: 200px; }
        .post-text { font-size: 13px; opacity: 0.8; line-height: 1.5; }

        .links-stack { display: grid; gap: 10px; margin-bottom: 25px; }
        .link-card { background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 15px; border-radius: 20px; color: white; text-decoration: none; font-weight: bold; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .link-card:hover { background: white; color: black; transform: scale(1.03); }

        .chat-input { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border); padding: 15px; border-radius: 20px; color: white; text-align: center; outline: none; box-sizing: border-box; }

        #admin-panel { display: none; position: fixed; inset: 0; z-index: 1000; background: rgba(0,0,0,0.98); backdrop-filter: blur(25px); padding: 30px; overflow-y: auto; }
        .admin-wrap { max-width: 450px; margin: 0 auto; text-align: right; }
        label { display: block; font-size: 12px; color: var(--accent); margin-top: 15px; }
        input, textarea { width: 100%; background: #111; border: 1px solid #333; color: white; padding: 12px; border-radius: 12px; margin-top: 5px; box-sizing: border-box; font-family: 'Tajawal'; }
        .msg-card { background: #1a1a1a; padding: 12px; border-radius: 12px; margin-bottom: 10px; position: relative; border-right: 3px solid var(--accent); font-size: 13px; }
    </style>
</head>
<body>

    <div class="bg-vibe"></div>

    <div class="app-shell">
        <div class="music-toggle" id="music-btn" onclick="toggleMusic()">
            <i class="fas fa-music"></i>
        </div>
        <audio id="bg-music" loop></audio>

        <span class="top-id" id="ui-top-id">AHMED HUB</span>
        
        <div class="pfp-stage" id="secret-btn">
            <div class="pfp-ring"></div>
            <div class="pfp-ring-2"></div>
            <img id="ui-pfp" src="https://via.placeholder.com/150">
        </div>

        <h1 id="ui-name">Ø£Ø­Ù…Ø¯ Ø³ÙŠØ¯</h1>
        <div class="bio-line" id="ui-bio">Designer & Developer</div>

        <div class="daily-post" id="ui-post-box">
            <img id="ui-post-img" src="" class="post-img">
            <div id="ui-post-text" class="post-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ…..</div>
        </div>

        <div class="links-stack" id="ui-links"></div>

        <input type="text" id="v-msg" class="chat-input" placeholder="Ø§ØªØ±Ùƒ ØªØ¹Ù„ÙŠÙ‚Ø§Ù‹ Ø³Ø±ÙŠØ§Ù‹...">
        <button onclick="sendMsg()" style="background:none; border:none; color:var(--accent); cursor:pointer; margin-top:10px; font-weight:bold;">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>

    <div id="admin-panel">
        <div class="admin-wrap">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2 style="color:var(--accent)">Master Control âš™ï¸</h2>
                <button onclick="closeAdmin()" style="background:none; border:none; color:white; font-size:30px; cursor:pointer;">Ã—</button>
            </div>

            <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù„ÙˆÙŠ (HUB NAME):</label><input type="text" id="adm-top-id">
            <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©:</label><input type="text" id="adm-pfp">
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label><input type="text" id="adm-name">
            <label>Ø§Ù„ÙˆØµÙ (Bio):</label><input type="text" id="adm-bio">
            
            <label style="color:#ffbd00">Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Direct MP3 Link):</label>
            <input type="text" id="adm-music-url" placeholder="https://example.com/song.mp3">

            <h4 style="color:var(--accent); margin-top:20px; border-top:1px solid #333; padding-top:10px;">Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ:</h4>
            <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±:</label><input type="text" id="adm-post-img">
            <label>Ù†Øµ Ø§Ù„Ù…Ù†Ø´ÙˆØ±:</label><textarea id="adm-post-text"></textarea>
            
            <h4 style="color:var(--accent); margin-top:20px; border-top:1px solid #333; padding-top:10px;">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„:</h4>
            <input type="text" id="adm-wa" placeholder="WhatsApp Link">
            <input type="text" id="adm-ig" placeholder="Instagram Link">
            <input type="text" id="adm-fb" placeholder="Facebook Link">

            <button onclick="saveMaster()" style="width:100%; background:var(--accent); color:black; font-weight:900; border:none; padding:18px; border-radius:20px; cursor:pointer; margin:20px 0;">Ø­ÙØ¸ ÙƒÙ„ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>

            <div class="admin-messages-box">
                <h3 style="color:var(--accent)">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø© (<span id="adm-msg-count">0</span>)</h3>
                <div id="admin-comments-list"></div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        // --- Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù‡Ù†Ø§ ---
        const firebaseConfig = {
            apiKey: "AIza...",
            authDomain: "mypersonalapp-2f2cc.firebaseapp.com",
            databaseURL: "https://mypersonalapp-2f2cc-default-rtdb.firebaseio.com",
            projectId: "mypersonalapp-2f2cc",
            storageBucket: "mypersonalapp-2f2cc.appspot.com",
            messagingSenderId: "...",
            appId: "..."
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const audio = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');

        function toggleMusic() {
            if (audio.paused) {
                audio.play();
                musicBtn.classList.add('playing');
            } else {
                audio.pause();
                musicBtn.classList.remove('playing');
            }
        }

        // Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
        let taps = 0;
        document.getElementById('secret-btn').onclick = () => {
            taps++;
            if(taps === 3) {
                let p = prompt("Password:");
                if(p === "1234") {
                    document.getElementById('admin-panel').style.display = 'block';
                    loadAdminData();
                }
                taps = 0;
            }
        };
        function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; }

        // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        db.ref('appData').on('value', snap => {
            const d = snap.val();
            if(!d) return;
            
            document.getElementById('ui-top-id').innerText = d.topId || "AHMED HUB";
            document.getElementById('ui-pfp').src = d.pfp || "https://via.placeholder.com/150";
            document.getElementById('ui-name').innerText = d.name || "Ø£Ø­Ù…Ø¯ Ø³ÙŠØ¯";
            document.getElementById('ui-bio').innerText = d.bio || "Designer";
            
            // ØªØ­Ø¯ÙŠØ« Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
            if(d.musicUrl && audio.src !== d.musicUrl) {
                audio.src = d.musicUrl;
            }

            const pImg = document.getElementById('ui-post-img');
            if(d.postImg) { pImg.src = d.postImg; pImg.style.display = 'block'; } else { pImg.style.display = 'none'; }
            document.getElementById('ui-post-text').innerText = d.postText || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙŠÙˆÙ…..";

            const stack = document.getElementById('ui-links');
            stack.innerHTML = "";
            if(d.wa) stack.innerHTML += `<a href="${d.wa}" target="_blank" class="link-card"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</a>`;
            if(d.ig) stack.innerHTML += `<a href="${d.ig}" target="_blank" class="link-card"><i class="fab fa-instagram"></i> Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</a>`;
            if(d.fb) stack.innerHTML += `<a href="${d.fb}" target="_blank" class="link-card"><i class="fab fa-facebook"></i> ÙÙŠØ³Ø¨ÙˆÙƒ</a>`;
        });

        function saveMaster() {
            db.ref('appData').update({
                topId: document.getElementById('adm-top-id').value,
                pfp: document.getElementById('adm-pfp').value,
                name: document.getElementById('adm-name').value,
                bio: document.getElementById('adm-bio').value,
                musicUrl: document.getElementById('adm-music-url').value, // Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
                postImg: document.getElementById('adm-post-img').value,
                postText: document.getElementById('adm-post-text').value,
                wa: document.getElementById('adm-wa').value,
                ig: document.getElementById('adm-ig').value,
                fb: document.getElementById('adm-fb').value
            }).then(() => { alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«! âœ¨"); closeAdmin(); });
        }

        function sendMsg() {
            const m = document.getElementById('v-msg').value;
            if(m) {
                db.ref('messages').push({ text: m, time: new Date().toLocaleString() });
                alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„! ğŸ’™");
                document.getElementById('v-msg').value = "";
            }
        }

        function loadAdminData() {
            db.ref('appData').once('value', s => {
                const d = s.val();
                if(d) {
                    document.getElementById('adm-top-id').value = d.topId || "";
                    document.getElementById('adm-pfp').value = d.pfp || "";
                    document.getElementById('adm-name').value = d.name || "";
                    document.getElementById('adm-bio').value = d.bio || "";
                    document.getElementById('adm-music-url').value = d.musicUrl || "";
                    document.getElementById('adm-post-img').value = d.postImg || "";
                    document.getElementById('adm-post-text').value = d.postText || "";
                    document.getElementById('adm-wa').value = d.wa || "";
                    document.getElementById('adm-ig').value = d.ig || "";
                    document.getElementById('adm-fb').value = d.fb || "";
                }
            });

            db.ref('messages').on('value', snap => {
                const list = document.getElementById('admin-comments-list');
                document.getElementById('adm-msg-count').innerText = snap.numChildren();
                list.innerHTML = "";
                snap.forEach(child => {
                    const data = child.val();
                    list.innerHTML = `<div class="msg-card"><i class="fas fa-trash" style="position:absolute; left:10px; color:#ff4d4d; cursor:pointer;" onclick="deleteMsg('${child.key}')"></i><div>${data.text}</div><span style="font-size:9px; opacity:0.5;">${data.time}</span></div>` + list.innerHTML;
                });
            });
        }

        function deleteMsg(key) {
            if(confirm("Ø­Ø°Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ØŸ")) db.ref('messages').child(key).remove();
        }
    </script>
</body>
</html>