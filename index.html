<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AHMED | PERFECT VIBES</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00F0FF;
            --secondary: #FF0055;
            --bg-deep: #050510;
            --glass-strong: rgba(25, 25, 40, 0.85);
            --glass-light: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.15);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

        body {
            margin: 0; font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-deep);
            color: white; height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* --- الخلفية --- */
        .nebula-bg {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #000 100%);
        }
        .stars {
            position: fixed; inset: 0; background: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.3; animation: twinkling 5s infinite alternate;
        }
        @keyframes twinkling { 0% {opacity:0.2;} 100% {opacity:0.4;} }

        /* --- إطار التطبيق --- */
        .app-frame {
            width: 100%; max-width: 500px; height: 100%;
            display: flex; flex-direction: column; padding: 20px;
        }

        /* --- الهيدر العلوي --- */
        .top-bar {
            display: flex; align-items: center; justify-content: space-between;
            background: var(--glass-strong); backdrop-filter: blur(15px);
            padding: 8px 15px; border-radius: 50px;
            border: 1px solid var(--border);
            margin-bottom: 25px; height: 75px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 50;
        }
        .profile-mini { position: relative; width: 50px; height: 50px; flex-shrink: 0; }
        .pfp-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid white; }
        
        .user-text { flex: 1; margin-right: 12px; display: flex; flex-direction: column; justify-content: center; }
        .u-name { font-size: 16px; font-weight: 800; margin: 0; line-height: 1.2; }
        .u-bio { font-size: 11px; opacity: 0.6; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 140px; }

        /* شريط الحالة */
        .status-badge {
            background: rgba(0, 240, 255, 0.08);
            border: 1px solid var(--primary);
            padding: 6px 14px; border-radius: 20px;
            display: flex; align-items: center; gap: 8px;
            box-shadow: 0 0 15px rgba(0, 240, 255, 0.15);
            max-width: 140px;
        }
        .mini-wave { display: flex; gap: 2px; align-items: flex-end; height: 12px; }
        .bar-s { width: 2px; background: var(--secondary); height: 5px; animation: tinyWave 0.8s infinite alternate; }
        .bar-s:nth-child(2) { animation-delay: 0.2s; }
        .bar-s:nth-child(3) { animation-delay: 0.4s; }
        @keyframes tinyWave { 0% {height: 4px;} 100% {height: 12px;} }

        .status-content {
            font-size: 11px; font-weight: bold; color: var(--primary);
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }

        /* --- الكارت المضيء --- */
        .main-stage { flex: 1; position: relative; display: flex; flex-direction: column; }

        .immersive-card {
            flex: 1; position: relative; border-radius: 35px;
            display: flex; flex-direction: column;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            background: #000; overflow: hidden; padding: 4px;
        }
        
        /* التعديل الأول: سرعة دوران الإطار (12s بدل 4s) */
        .immersive-card::before {
            content: ''; position: absolute; inset: -50%;
            background: conic-gradient(from 0deg, transparent 0deg, var(--primary) 60deg, transparent 120deg, var(--secondary) 180deg, transparent 240deg, var(--primary) 300deg, transparent 360deg);
            animation: rotateBorder 12s linear infinite; z-index: 0;
        }
        @keyframes rotateBorder { 100% { transform: rotate(360deg); } }

        .card-inner {
            position: relative; width: 100%; height: 100%;
            background: #111; border-radius: 32px;
            overflow: hidden; z-index: 1;
        }

        /* --- Slideshow --- */
        .slide-layer { position: absolute; inset: 0; z-index: 0; }
        .bg-slide {
            position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;
            opacity: 0; transition: opacity 2s ease-in-out, transform 12s linear; /* جعلت الانتقال أيضاً أنعم */
            transform: scale(1); filter: brightness(0.6);
        }
        .bg-slide.active { opacity: 1; transform: scale(1.1); }
        .bg-slide.fallback { background: linear-gradient(45deg, #222, #000); opacity: 1; }

        /* --- Controls --- */
        .controls-layer {
            position: relative; z-index: 10; height: 100%; width: 100%;
            display: flex; flex-direction: column;
            justify-content: space-between; align-items: center;
            padding: 20px;
        }
        .spacer { flex: 1; }

        .play-wrapper { flex: 1; display: flex; align-items: center; justify-content: center; }
        .play-btn-big {
            width: 90px; height: 90px; border-radius: 50%;
            background: rgba(255,255,255,0.15); backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.5);
            display: flex; justify-content: center; align-items: center;
            font-size: 35px; color: white; cursor: pointer;
            transition: 0.3s; box-shadow: 0 0 30px rgba(0,240,255,0.3);
        }
        .play-btn-big:active { transform: scale(0.9); }
        .immersive-card.playing .play-btn-big {
            border-color: var(--secondary); background: rgba(255, 0, 85, 0.2);
            box-shadow: 0 0 60px var(--secondary); animation: pulseBtn 2s infinite;
        }
        @keyframes pulseBtn { 0% {transform:scale(1);} 50% {transform:scale(1.1);} 100% {transform:scale(1);} }

        .bottom-info {
            flex: 1; display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
            width: 100%; padding-bottom: 10px;
        }
        .visualizer {
            display: flex; gap: 5px; height: 30px; align-items: flex-end; margin-bottom: 10px; opacity: 0; transition: 0.5s;
        }
        .immersive-card.playing .visualizer { opacity: 1; }
        .v-bar { width: 5px; background: var(--primary); border-radius: 10px; height: 5px; }
        .immersive-card.playing .v-bar { animation: wave 0.6s infinite alternate; }
        .immersive-card.playing .v-bar:nth-child(even) { background: var(--secondary); animation-delay: 0.1s; }
        @keyframes wave { 0% {height: 5px;} 100% {height: 30px;} }

        .slide-caption {
            font-size: 16px; font-weight: bold; text-align: center;
            text-shadow: 0 2px 5px rgba(0,0,0,0.9);
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 8px 20px; border-radius: 20px; width: 100%;
        }

        /* --- Messages --- */
        .message-section {
            position: absolute; inset: 0; z-index: 20;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(20px);
            border-radius: 35px; display: none;
            flex-direction: column; justify-content: center; align-items: center; padding: 30px;
            animation: zoomIn 0.3s ease; border: 1px solid var(--border);
        }
        .message-section.active { display: flex; }
        @keyframes zoomIn { from {opacity:0; transform: scale(0.95);} to {opacity:1; transform: scale(1);} }
        
        .msg-input { width: 100%; padding: 15px; background: rgba(255,255,255,0.1); border: 1px solid #555; border-radius: 15px; color: white; text-align: center; margin-bottom: 20px; font-family: inherit; }
        .send-btn { padding: 12px 40px; background: linear-gradient(90deg, var(--primary), var(--secondary)); border: none; border-radius: 50px; color: white; font-weight: bold; cursor: pointer; }

        /* --- Dock --- */
        .dock {
            margin-top: 25px; height: 75px;
            background: var(--glass-light); border: 1px solid var(--border);
            border-radius: 40px; display: flex; justify-content: space-around; align-items: center;
            backdrop-filter: blur(15px);
        }
        .dock-btn { display: flex; flex-direction: column; align-items: center; color: rgba(255,255,255,0.4); cursor: pointer; transition: 0.3s; }
        .dock-btn.active { color: white; transform: translateY(-5px); text-shadow: 0 0 10px var(--primary); }

        /* --- Admin --- */
        #admin-panel { display: none; position: fixed; inset: 0; background: #000; z-index: 9999; padding: 30px; overflow-y: auto; }
        .adm-inp { width: 100%; background: #222; border: 1px solid #444; color: white; padding: 12px; margin-bottom: 10px; border-radius: 8px; }

    </style>
</head>
<body>

    <div class="nebula-bg">
        <div class="stars"></div>
    </div>

    <div class="app-frame">
        <div class="top-bar">
            <div class="profile-mini" id="secret-trigger">
                <img id="ui-pfp" src="https://via.placeholder.com/100" class="pfp-img">
            </div>
            <div class="user-text">
                <h2 class="u-name" id="ui-name">...</h2>
                <div class="u-bio" id="ui-bio">...</div>
            </div>
            <div class="status-badge">
                <div class="mini-wave">
                    <div class="bar-s"></div><div class="bar-s"></div><div class="bar-s"></div>
                </div>
                <div class="status-content" id="ui-status">Vibing...</div>
            </div>
        </div>

        <div class="main-stage">
            <div id="view-home" class="immersive-card">
                <div class="card-inner">
                    <div class="slide-layer" id="bg-slideshow">
                        <div class="bg-slide fallback active"></div>
                    </div>
                    <div class="controls-layer">
                        <div class="spacer"></div>
                        <div class="play-wrapper">
                            <div class="play-btn-big" onclick="togglePlay()">
                                <i class="fas fa-play" id="main-icon"></i>
                            </div>
                        </div>
                        <div class="bottom-info">
                            <div class="visualizer">
                                <div class="v-bar"></div><div class="v-bar"></div><div class="v-bar"></div><div class="v-bar"></div><div class="v-bar"></div>
                            </div>
                            <div class="slide-caption" id="slide-text">Welcome</div>
                        </div>
                    </div>
                </div>
                <audio id="audio-player" loop></audio>
            </div>

            <div id="view-msg" class="message-section">
                <i class="fas fa-paper-plane" style="font-size:40px; color:var(--primary); margin-bottom:20px;"></i>
                <h3 style="margin-top:0;">Send Message</h3>
                <input id="v-msg" class="msg-input" placeholder="اكتب هنا...">
                <button onclick="sendMsg()" class="send-btn">إرسال</button>
            </div>
        </div>

        <div class="dock">
            <div class="dock-btn active" onclick="switchView('home')">
                <i class="fas fa-compact-disc" style="font-size:24px; margin-bottom:5px;"></i>
                <span>Vibes</span>
            </div>
            <div class="dock-btn" onclick="switchView('msg')">
                <i class="fas fa-comment-dots" style="font-size:24px; margin-bottom:5px;"></i>
                <span>Chat</span>
            </div>
        </div>
    </div>

    <div id="admin-panel">
        <h2 style="color:var(--primary)">Settings ⚙️</h2>
        <button onclick="document.getElementById('admin-panel').style.display='none'" style="float:right; background:none; border:none; color:white; font-size:20px;">✕</button>
        <br><br>
        
        <label style="color:#888;">Profile & Status</label>
        <input id="adm-name" class="adm-inp" placeholder="Name">
        <input id="adm-bio" class="adm-inp" placeholder="Bio">
        <input id="adm-status" class="adm-inp" placeholder="Status (Song/Mood)" style="border-color:var(--primary);">
        <input id="adm-pfp" class="adm-inp" placeholder="PFP URL">
        <input id="adm-music" class="adm-inp" placeholder="Music URL">
        
        <label style="color:#888; margin-top:10px; display:block;">Slideshow</label>
        <input id="adm-img-1" class="adm-inp" placeholder="Img 1 URL">
        <input id="adm-txt-1" class="adm-inp" placeholder="Txt 1">
        <input id="adm-img-2" class="adm-inp" placeholder="Img 2 URL">
        <input id="adm-txt-2" class="adm-inp" placeholder="Txt 2">
        <input id="adm-img-3" class="adm-inp" placeholder="Img 3 URL">
        <input id="adm-txt-3" class="adm-inp" placeholder="Txt 3">

        <button onclick="saveData()" class="send-btn" style="width:100%; margin-top:20px;">Save</button>
        
        <div style="margin-top:30px;">
            <h4>Messages</h4>
            <div id="admin-msgs"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIza...",
            authDomain: "mypersonalapp-2f2cc.firebaseapp.com",
            databaseURL: "https://mypersonalapp-2f2cc-default-rtdb.firebaseio.com",
            projectId: "mypersonalapp-2f2cc",
            storageBucket: "mypersonalapp-2f2cc.appspot.com",
            messagingSenderId: "...",
            appId: "..."
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const audio = document.getElementById('audio-player');
        const card = document.getElementById('view-home');
        const icon = document.getElementById('main-icon');
        const slideBox = document.getElementById('bg-slideshow');
        const slideTxt = document.getElementById('slide-text');
        
        let slides = [];
        let slideTimer;
        let currSlide = 0;

        function togglePlay() {
            if(audio.paused) {
                audio.play().then(() => {
                    card.classList.add('playing');
                    icon.classList.replace('fa-play', 'fa-pause');
                });
            } else {
                audio.pause();
                card.classList.remove('playing');
                icon.classList.replace('fa-pause', 'fa-play');
            }
        }

        function initSlides(d) {
            slides = [];
            slideBox.innerHTML = "";
            for(let i=1; i<=3; i++) {
                if(d['img'+i] || d['txt'+i]) slides.push({img:d['img'+i], txt:d['txt'+i]});
            }
            if(slides.length === 0) {
                slideBox.innerHTML = `<div class="bg-slide fallback active"></div>`;
                slideTxt.innerText = d.bio || "Welcome";
                return;
            }
            slides.forEach((s, i) => {
                const el = document.createElement('img');
                el.src = s.img || "https://via.placeholder.com/600";
                el.className = "bg-slide";
                el.id = `slide-${i}`;
                slideBox.appendChild(el);
            });
            runSlides();
        }

        function runSlides() {
            if(slideTimer) clearInterval(slideTimer);
            showS(0);
            // التعديل الثاني: سرعة تبديل الشرائح (8 ثواني بدل 4)
            slideTimer = setInterval(() => {
                currSlide = (currSlide + 1) % slides.length;
                showS(currSlide);
            }, 8000); 
        }

        function showS(idx) {
            document.querySelectorAll('.bg-slide').forEach(e => e.classList.remove('active'));
            const el = document.getElementById(`slide-${idx}`);
            if(el) {
                el.classList.add('active');
                slideTxt.innerText = slides[idx].txt || "";
            }
        }

        function switchView(v) {
            if(v === 'home') {
                document.getElementById('view-msg').classList.remove('active');
                updateDock(0);
            } else {
                document.getElementById('view-msg').classList.add('active');
                updateDock(1);
            }
        }
        function updateDock(idx) {
            document.querySelectorAll('.dock-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.dock-btn')[idx].classList.add('active');
        }

        db.ref('appData').on('value', s => {
            const d = s.val() || {};
            document.getElementById('ui-name').innerText = d.name || "User";
            document.getElementById('ui-bio').innerText = d.bio || "Online";
            document.getElementById('ui-status').innerText = d.status || "Vibing...";
            document.getElementById('ui-pfp').src = d.pfp || "https://via.placeholder.com/100";
            if(d.musicUrl && audio.src !== d.musicUrl) audio.src = d.musicUrl;
            initSlides(d);
        });

        let taps = 0;
        document.getElementById('secret-trigger').onclick = () => {
            taps++;
            if(taps === 3) {
                if(prompt("Code:") === "1234") {
                    document.getElementById('admin-panel').style.display='block';
                    loadAdm();
                }
                taps = 0;
            }
        };

        function loadAdm() {
            db.ref('appData').once('value', s => {
                const d = s.val() || {};
                document.getElementById('adm-name').value = d.name || "";
                document.getElementById('adm-bio').value = d.bio || "";
                document.getElementById('adm-status').value = d.status || "";
                document.getElementById('adm-pfp').value = d.pfp || "";
                document.getElementById('adm-music').value = d.musicUrl || "";
                for(let i=1; i<=3; i++) {
                    document.getElementById('adm-img-'+i).value = d['img'+i] || "";
                    document.getElementById('adm-txt-'+i).value = d['txt'+i] || "";
                }
            });
            db.ref('messages').on('value', s => {
                const b = document.getElementById('admin-msgs');
                b.innerHTML = "";
                s.forEach(m => {
                    b.innerHTML += `<div style="background:#222; padding:10px; margin-bottom:5px; border-radius:5px;">${m.val().text} <span style="float:left; color:red; cursor:pointer;" onclick="db.ref('messages/${m.key}').remove()">✖</span></div>`;
                });
            });
        }

        function saveData() {
            let data = {
                name: document.getElementById('adm-name').value,
                bio: document.getElementById('adm-bio').value,
                status: document.getElementById('adm-status').value,
                pfp: document.getElementById('adm-pfp').value,
                musicUrl: document.getElementById('adm-music').value
            };
            for(let i=1; i<=3; i++) {
                data['img'+i] = document.getElementById('adm-img-'+i).value;
                data['txt'+i] = document.getElementById('adm-txt-'+i).value;
            }
            db.ref('appData').update(data).then(() => { alert("Saved!"); document.getElementById('admin-panel').style.display='none'; });
        }

        function sendMsg() {
            const v = document.getElementById('v-msg').value;
            if(v) { db.ref('messages').push({text:v, time:Date.now()}); alert("Sent!"); document.getElementById('v-msg').value=""; switchView('home'); }
        }
    </script>
</body>
</html>
